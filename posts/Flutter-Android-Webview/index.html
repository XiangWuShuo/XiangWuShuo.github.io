
<!DOCTYPE html>
<html lang="zh-CN">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="享物说官方技术博客">
    <title>Flutter 与 Android 的 WebView 对比 - 享物说官方技术博客</title>
    <meta name="author" content="享物说">
    
        <meta name="keywords" content="享物说,官方,技术,博客,">
    
    
        <link rel="icon" href="https://xiangwushuo.github.io/assets/images/favicon.ico">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"享物说","sameAs":["https://www.xiangwushuo.com/","https://github.com/XiangWuShuo","https://weibo.com/u/6392701049","https://cn.linkedin.com/company/%E4%BA%AB%E7%89%A9%E8%AF%B4","https://www.lagou.com/gongsi/316814.html","mailto:developer@xiangwushuo.com"],"image":"https://www.gravatar.com/avatar/a5c1ed814269001a19150c512bc1efe0"},"articleBody":"前言自从 google 推出 flutter 跨平台开发框架以来，flutter 在各个技术论坛里被炒得如日中天。\n说到跨平台开发，就不得不提 WebView，WebView 可以说是最廉价的跨平台开发方案。我们知道，flutter 可以和 native 混合开发，它们可以互相调用。那么当我们进行混合开发的时候，如果需要使用 WebView，我们应该调用原生的 WebView 还是使用 flutter 自己实现 WebView 呢？如果用 flutter 自己实现 WebView，它的性能与 native 相比如何呢？今天我们就以 android 为例从几个不同的维度来实际测试一下！\nFlutter 实现 WebViewflutter 官方是没有 WebView 组件的，不过强大的 flutter-community 论坛考虑到广大开发者的需求，开发了 flutter_webview_plugin 插件，方便在 flutter 中使用使用 WebView。\n集成方式很简单，在 pubspec.yaml 文件中：\n1234dependencies:  flutter:    sdk: flutter  flutter_webview_plugin: ^0.3.0+2\n接下来所有的对比都是基于 Android 原生的 WebView 和 flutter_webview_plugin 插件，为了严谨，并未对第三方 WebView 作对比。\n\n测试手机：小米8SE 系统：Android 8.1.0\n\n加载速度对比测试网页打开的速度，只需要获取 WebView 在开始加载网页和网页加载完成时的时间戳，时间戳的差即为打开网页的时间，我们分别在 Android 原生和 flutter 中的相应位置打印 log：\n1234567891011webView?.webViewClient = object : WebViewClient() &#123;    override fun onPageStarted(view: WebView?, url: String?, favicon: Bitmap?) &#123;        Log.d(TAG, \"onPageStarted:\" + System.currentTimeMillis())        super.onPageStarted(view, url, favicon)    &#125;    override fun onPageFinished(view: WebView?, url: String?) &#123;        Log.d(TAG, \"onPageFinished:\" + System.currentTimeMillis())        super.onPageFinished(view, url)    &#125;&#125;\n12345678910111213flutterWebViewPlugin.onStateChanged.listen((state) &#123;  if (state.type == WebViewState.finishLoad) &#123;    print('finishLoad:' + DateTime.now().millisecondsSinceEpoch.toString());    setState(() &#123;      isLoad = false;    &#125;);  &#125; else if (state.type == WebViewState.startLoad) &#123;    print('startLoad:' + DateTime.now().millisecondsSinceEpoch.toString());    setState(() &#123;      isLoad = true;    &#125;);  &#125;&#125;);\n为了使差异更明显，我们选择较为复杂的 新浪首页 进行加载的对比，为了减小网络对加载速度的影响，我们让手机连接同一个网络，分别进行 10 次测试然后取平均值，另外，我们需要关闭 WebView 的缓存，防止缓存对加载速度产生影响：\n1webView?.settings?.cacheMode = WebSettings.LOAD_NO_CACHE\n123456789WebviewScaffold(  key: _scaffoldKey,  url: widget.url,  clearCache: true,  appCacheEnabled: false,  .  .  .);\n下面使笔者进行 10 次测试所得到的数据：\n\n\n\n\nAndroid WebView\nflutter_webview_plugin\n\n\n\n\n0\n2731\n2442\n\n\n1\n2502\n2623\n\n\n2\n2747\n2422\n\n\n3\n2652\n2323\n\n\n4\n2553\n2596\n\n\n5\n2645\n2379\n\n\n6\n2670\n2342\n\n\n7\n2691\n2218\n\n\n8\n3773\n2429\n\n\n9\n2631\n2453\n\n\navg\n2759.5\n2421.7\n\n\n\n可以发现，相同环境下 flutter_webview_plugin 的加载速度比 native WebView 略快，但是差异不明显，基本可以忽略。\n结论：flutter_webview_plugin 的加载速度比 native WebView 略快。\n内存占用对比可以使用 AndroidStudio 自带的 profiler 工具来进行占用内存的测试，我们在 flutter 程序中同时集成调用 native WebView 和 flutter_webview_plugin 来打开淘宝首页和新浪首页的方法，在程序刚运行的时候内存占用如下图：\n\n然后用 WebView 打开淘宝首页：\n\n用 flutter_webview_plugin 打开淘宝首页：\n\n可以发现，用 WebView 打开淘宝首页内存基本无变化，但是用 flutter_webview_plugin 打开淘宝首页内存有明显的增加，且波动较大。\n结论：flutter_webview_plugin 相对 native WebView 而言，占用内存较大。\nHTML5 兼容性对比可以在 html5test 中对浏览器的兼容性进行评分，通过测试发现 native WebView 和 flutter_webview_plugin 的得分分别如下：\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n发现在小米8SE手机上，native WebView 和 flutter_webview_plugin 的 html5 兼容性得分都是 501。\n结论：native WebView 和 flutter_webview_plugin 的 html5 兼容性无明显差异。\n总结我们对 native WebView 和 flutter_webview_plugin 分别进行了网页加载速度、占用内存和 html5 兼容性作了对比，发现 native WebView 占用内存更小，网页加载速度和 html5 的兼容性无明显差异。\n在实际使用中，由于 flutter_webview_plugin 并不存在于 widget 树中，所以不能在 flutter_webview_plugin 中使用如 snackbars, dialogs…这些通知交互 widget。但是 flutter_webview_plugin 具有跨平台的优势，如果需要同时 flutter 项目中同时在 Android 和 iOS 端使用 WebView，建议使用 flutter_webview_plugin，否则，建议使用 native WebView。\n\n再读一篇类似文章？推荐阅读姊妹篇：\nFlutter 与 iOS 的 WebView 对比\n\n\n如有任何知识产权、版权问题或理论错误，还请指正。https://xiangwushuo.github.io/posts/Flutter-Android-Webview本文作者 Zackratos，转载请注明原作者及以上信息。\n\n","dateCreated":"2019-02-28T15:01:31+08:00","dateModified":"2019-02-28T15:01:31+08:00","datePublished":"2019-02-28T15:01:31+08:00","description":"","headline":"Flutter 与 Android 的 WebView 对比","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://xiangwushuo.github.io/posts/Flutter-Android-Webview/"},"publisher":{"@type":"Organization","name":"享物说","sameAs":["https://www.xiangwushuo.com/","https://github.com/XiangWuShuo","https://weibo.com/u/6392701049","https://cn.linkedin.com/company/%E4%BA%AB%E7%89%A9%E8%AF%B4","https://www.lagou.com/gongsi/316814.html","mailto:developer@xiangwushuo.com"],"image":"https://www.gravatar.com/avatar/a5c1ed814269001a19150c512bc1efe0","logo":{"@type":"ImageObject","url":"https://www.gravatar.com/avatar/a5c1ed814269001a19150c512bc1efe0"}},"url":"https://xiangwushuo.github.io/posts/Flutter-Android-Webview/"}</script>
    <meta name="description" content="前言自从 google 推出 flutter 跨平台开发框架以来，flutter 在各个技术论坛里被炒得如日中天。 说到跨平台开发，就不得不提 WebView，WebView 可以说是最廉价的跨平台开发方案。我们知道，flutter 可以和 native 混合开发，它们可以互相调用。那么当我们进行混合开发的时候，如果需要使用 WebView，我们应该调用原生的 WebView 还是使用 flutt">
<meta name="keywords" content="享物说,官方,技术,博客">
<meta property="og:type" content="blog">
<meta property="og:title" content="Flutter 与 Android 的 WebView 对比">
<meta property="og:url" content="https://xiangwushuo.github.io/posts/Flutter-Android-Webview/index.html">
<meta property="og:site_name" content="享物说官方技术博客">
<meta property="og:description" content="前言自从 google 推出 flutter 跨平台开发框架以来，flutter 在各个技术论坛里被炒得如日中天。 说到跨平台开发，就不得不提 WebView，WebView 可以说是最廉价的跨平台开发方案。我们知道，flutter 可以和 native 混合开发，它们可以互相调用。那么当我们进行混合开发的时候，如果需要使用 WebView，我们应该调用原生的 WebView 还是使用 flutt">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/2/27/1692dac911f75635?w=940&h=206&f=png&s=7447">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/2/27/1692db0536700223?w=946&h=176&f=png&s=7872">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/2/27/1692db12ba8b0c95?w=948&h=171&f=png&s=14653">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/2/27/1692dd08f7f91682?w=1080&h=2244&f=png&s=181497">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2019/2/27/1692dd42717f9fa9?w=1080&h=2244&f=png&s=179730">
<meta property="og:updated_time" content="2019-02-28T07:01:31.878Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Flutter 与 Android 的 WebView 对比">
<meta name="twitter:description" content="前言自从 google 推出 flutter 跨平台开发框架以来，flutter 在各个技术论坛里被炒得如日中天。 说到跨平台开发，就不得不提 WebView，WebView 可以说是最廉价的跨平台开发方案。我们知道，flutter 可以和 native 混合开发，它们可以互相调用。那么当我们进行混合开发的时候，如果需要使用 WebView，我们应该调用原生的 WebView 还是使用 flutt">
<meta name="twitter:image" content="https://user-gold-cdn.xitu.io/2019/2/27/1692dac911f75635?w=940&h=206&f=png&s=7447">
    
    
        
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/a5c1ed814269001a19150c512bc1efe0?s=640"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-bmqvr3baofujppur7vfrazarcnjueeyjoamnwnrgk68sby4rmy9byhrazvrl.min.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">享物说官方技术博客</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="https://www.gravatar.com/avatar/a5c1ed814269001a19150c512bc1efe0?s=90" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/a5c1ed814269001a19150c512bc1efe0?s=110" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">享物说</h4>
                
                    <h5 class="sidebar-profile-bio"><p>官方技术博客</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="首页"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="分类"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="标签"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="归档"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="搜索"
                        >
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="关于"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.xiangwushuo.com/" target="_blank" rel="noopener" title="XiangWuShuo">
                    
                        <i class="sidebar-button-icon fab fa-internet-explorer" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">XiangWuShuo</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/XiangWuShuo" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://weibo.com/u/6392701049" target="_blank" rel="noopener" title="Weibo">
                    
                        <i class="sidebar-button-icon fab fa-weibo" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Weibo</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://cn.linkedin.com/company/%E4%BA%AB%E7%89%A9%E8%AF%B4" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.lagou.com/gongsi/316814.html" target="_blank" rel="noopener" title="Lagou">
                    
                        <i class="sidebar-button-icon fab fa-adversal" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Lagou</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:developer@xiangwushuo.com" target="_blank" rel="noopener" title="邮箱">
                    
                        <i class="sidebar-button-icon fab fa-contao" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Flutter 与 Android 的 WebView 对比
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-02-28T15:01:31+08:00">
	
		    2月 28, 2019
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>自从 google 推出 flutter 跨平台开发框架以来，flutter 在各个技术论坛里被炒得如日中天。</p>
<p>说到跨平台开发，就不得不提 WebView，WebView 可以说是最廉价的跨平台开发方案。我们知道，flutter 可以和 native 混合开发，它们可以互相调用。那么当我们进行混合开发的时候，如果需要使用 WebView，我们应该调用原生的 WebView 还是使用 flutter 自己实现 WebView 呢？如果用 flutter 自己实现 WebView，它的性能与 native 相比如何呢？今天我们就以 android 为例从几个不同的维度来实际测试一下！</p>
<h2 id="Flutter-实现-WebView"><a href="#Flutter-实现-WebView" class="headerlink" title="Flutter 实现 WebView"></a>Flutter 实现 WebView</h2><p>flutter 官方是没有 WebView 组件的，不过强大的 <a href="https://medium.com/flutter-community" target="_blank" rel="noopener">flutter-community</a> 论坛考虑到广大开发者的需求，开发了 <a href="https://pub.flutter-io.cn/packages/flutter_webview_plugin" target="_blank" rel="noopener">flutter_webview_plugin</a> 插件，方便在 flutter 中使用使用 WebView。</p>
<p>集成方式很简单，在 pubspec.yaml 文件中：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  flutter:</span><br><span class="line">    sdk: flutter</span><br><span class="line">  flutter_webview_plugin: ^<span class="number">0.3</span><span class="number">.0</span>+<span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>接下来所有的对比都是基于 Android 原生的 WebView 和 flutter_webview_plugin 插件，为了严谨，并未对第三方 WebView 作对比。</p>
<blockquote>
<p>测试手机：小米8SE <br><br>系统：Android 8.1.0</p>
</blockquote>
<h2 id="加载速度对比"><a href="#加载速度对比" class="headerlink" title="加载速度对比"></a>加载速度对比</h2><p>测试网页打开的速度，只需要获取 WebView 在开始加载网页和网页加载完成时的时间戳，时间戳的差即为打开网页的时间，我们分别在 Android 原生和 flutter 中的相应位置打印 log：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">webView?.webViewClient = <span class="keyword">object</span> : WebViewClient() &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPageStarted</span><span class="params">(view: <span class="type">WebView</span>?, url: <span class="type">String</span>?, favicon: <span class="type">Bitmap</span>?)</span></span> &#123;</span><br><span class="line">        Log.d(TAG, <span class="string">"onPageStarted:"</span> + System.currentTimeMillis())</span><br><span class="line">        <span class="keyword">super</span>.onPageStarted(view, url, favicon)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPageFinished</span><span class="params">(view: <span class="type">WebView</span>?, url: <span class="type">String</span>?)</span></span> &#123;</span><br><span class="line">        Log.d(TAG, <span class="string">"onPageFinished:"</span> + System.currentTimeMillis())</span><br><span class="line">        <span class="keyword">super</span>.onPageFinished(view, url)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">flutterWebViewPlugin.onStateChanged.listen((state) &#123;</span><br><span class="line">  <span class="keyword">if</span> (state.type == WebViewState.finishLoad) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'finishLoad:'</span> + <span class="built_in">DateTime</span>.now().millisecondsSinceEpoch.toString());</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      isLoad = <span class="keyword">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state.type == WebViewState.startLoad) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'startLoad:'</span> + <span class="built_in">DateTime</span>.now().millisecondsSinceEpoch.toString());</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      isLoad = <span class="keyword">true</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>为了使差异更明显，我们选择较为复杂的 <a href="https://www.sina.com.cn/" target="_blank" rel="noopener">新浪首页</a> 进行加载的对比，为了减小网络对加载速度的影响，我们让手机连接同一个网络，分别进行 10 次测试然后取平均值，另外，我们需要关闭 WebView 的缓存，防止缓存对加载速度产生影响：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webView?.settings?.cacheMode = WebSettings.LOAD_NO_CACHE</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">WebviewScaffold(</span><br><span class="line">  key: _scaffoldKey,</span><br><span class="line">  url: widget.url,</span><br><span class="line">  clearCache: <span class="keyword">true</span>,</span><br><span class="line">  appCacheEnabled: <span class="keyword">false</span>,</span><br><span class="line">  .</span><br><span class="line">  .</span><br><span class="line">  .</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>下面使笔者进行 10 次测试所得到的数据：</p>
<table>
<thead>
<tr>
<th></th>
<th>Android WebView</th>
<th>flutter_webview_plugin</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>2731</td>
<td>2442</td>
</tr>
<tr>
<td>1</td>
<td>2502</td>
<td>2623</td>
</tr>
<tr>
<td>2</td>
<td>2747</td>
<td>2422</td>
</tr>
<tr>
<td>3</td>
<td>2652</td>
<td>2323</td>
</tr>
<tr>
<td>4</td>
<td>2553</td>
<td>2596</td>
</tr>
<tr>
<td>5</td>
<td>2645</td>
<td>2379</td>
</tr>
<tr>
<td>6</td>
<td>2670</td>
<td>2342</td>
</tr>
<tr>
<td>7</td>
<td>2691</td>
<td>2218</td>
</tr>
<tr>
<td>8</td>
<td>3773</td>
<td>2429</td>
</tr>
<tr>
<td>9</td>
<td>2631</td>
<td>2453</td>
</tr>
<tr>
<td>avg</td>
<td>2759.5</td>
<td>2421.7</td>
</tr>
</tbody>
</table>
<p>可以发现，相同环境下 flutter_webview_plugin 的加载速度比 native WebView 略快，但是差异不明显，基本可以忽略。</p>
<p>结论：flutter_webview_plugin 的加载速度比 native WebView 略快。</p>
<h2 id="内存占用对比"><a href="#内存占用对比" class="headerlink" title="内存占用对比"></a>内存占用对比</h2><p>可以使用 AndroidStudio 自带的 profiler 工具来进行占用内存的测试，我们在 flutter 程序中同时集成调用 native WebView 和 flutter_webview_plugin 来打开淘宝首页和新浪首页的方法，在程序刚运行的时候内存占用如下图：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/2/27/1692dac911f75635?w=940&amp;h=206&amp;f=png&amp;s=7447" alt=""></p>
<p>然后用 WebView 打开淘宝首页：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/2/27/1692db0536700223?w=946&amp;h=176&amp;f=png&amp;s=7872" alt=""></p>
<p>用 flutter_webview_plugin 打开淘宝首页：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/2/27/1692db12ba8b0c95?w=948&amp;h=171&amp;f=png&amp;s=14653" alt=""></p>
<p>可以发现，用 WebView 打开淘宝首页内存基本无变化，但是用 flutter_webview_plugin 打开淘宝首页内存有明显的增加，且波动较大。</p>
<p>结论：flutter_webview_plugin 相对 native WebView 而言，占用内存较大。</p>
<h2 id="HTML5-兼容性对比"><a href="#HTML5-兼容性对比" class="headerlink" title="HTML5 兼容性对比"></a>HTML5 兼容性对比</h2><p>可以在 <a href="http://html5test.com/" target="_blank" rel="noopener">html5test</a> 中对浏览器的兼容性进行评分，通过测试发现 native WebView 和 flutter_webview_plugin 的得分分别如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://user-gold-cdn.xitu.io/2019/2/27/1692dd08f7f91682?w=1080&amp;h=2244&amp;f=png&amp;s=181497" alt=""></td>
<td style="text-align:center"><img src="https://user-gold-cdn.xitu.io/2019/2/27/1692dd42717f9fa9?w=1080&amp;h=2244&amp;f=png&amp;s=179730" alt=""></td>
</tr>
</tbody>
</table>
<p>发现在小米8SE手机上，native WebView 和 flutter_webview_plugin 的 html5 兼容性得分都是 501。</p>
<p>结论：native WebView 和 flutter_webview_plugin 的 html5 兼容性无明显差异。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>我们对 native WebView 和 flutter_webview_plugin 分别进行了网页加载速度、占用内存和 html5 兼容性作了对比，发现 native WebView 占用内存更小，网页加载速度和 html5 的兼容性无明显差异。</p>
<p>在实际使用中，由于 flutter_webview_plugin 并不存在于 widget 树中，所以不能在 flutter_webview_plugin 中使用如 snackbars, dialogs…这些通知交互 widget。但是 flutter_webview_plugin 具有跨平台的优势，如果需要同时 flutter 项目中同时在 Android 和 iOS 端使用 WebView，建议使用 flutter_webview_plugin，否则，建议使用 native WebView。</p>
<hr>
<p>再读一篇类似文章？推荐阅读姊妹篇：</p>
<p><a href="https://xiangwushuo.github.io/posts/Flutter-iOS-WebView">Flutter 与 iOS 的 WebView 对比</a></p>
<hr>
<blockquote>
<p>如有任何知识产权、版权问题或理论错误，还请指正。<br><a href="https://xiangwushuo.github.io/posts/Flutter-Android-Webview">https://xiangwushuo.github.io/posts/Flutter-Android-Webview</a><br>本文作者 Zackratos，转载请注明原作者及以上信息。</p>
</blockquote>

            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/posts/Flutter-iOS-WebView/" data-tooltip="Flutter 与 iOS 的 WebView 对比" aria-label="下一篇: Flutter 与 iOS 的 WebView 对比">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://xiangwushuo.github.io/posts/Flutter-Android-Webview/" title="分享到 Facebook">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://xiangwushuo.github.io/posts/Flutter-Android-Webview/" title="分享到 Twitter">
                    <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://xiangwushuo.github.io/posts/Flutter-Android-Webview/" title="分享到 Google+">
                    <i class="fa fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment-o"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 享物说. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/posts/Flutter-iOS-WebView/" data-tooltip="Flutter 与 iOS 的 WebView 对比" aria-label="下一篇: Flutter 与 iOS 的 WebView 对比">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://xiangwushuo.github.io/posts/Flutter-Android-Webview/" title="分享到 Facebook">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://xiangwushuo.github.io/posts/Flutter-Android-Webview/" title="分享到 Twitter">
                    <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://xiangwushuo.github.io/posts/Flutter-Android-Webview/" title="分享到 Google+">
                    <i class="fa fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment-o"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-close"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://xiangwushuo.github.io/posts/Flutter-Android-Webview/">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i><span>分享到 Facebook</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://xiangwushuo.github.io/posts/Flutter-Android-Webview/">
                    <i class="fa fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://xiangwushuo.github.io/posts/Flutter-Android-Webview/">
                    <i class="fa fa-google-plus" aria-hidden="true"></i><span>分享到 Google+</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/a5c1ed814269001a19150c512bc1efe0?s=110" alt="作者的图片"/>
        
            <h4 id="about-card-name">享物说</h4>
        
            <div id="about-card-bio"><p>官方技术博客</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>研发</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                上海
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">没有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xiangwushuo.github.io/posts/CodeT-Share/">
                            <h3 class="media-heading">上海 T 沙龙移动实践日：大流量⼩程序的架构与性能优化</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年2月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xiangwushuo.github.io/posts/Flutter-Android-Webview/">
                            <h3 class="media-heading">Flutter 与 Android 的 WebView 对比</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年2月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xiangwushuo.github.io/posts/Flutter-iOS-WebView/">
                            <h3 class="media-heading">Flutter 与 iOS 的 WebView 对比</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年2月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="没有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 3 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-1pgt50lbsn9guym07eil3dqxmzbmhtsoccwavz5obepnqt3ncrxse7pjdt3m.min.js"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'https://xiangwushuo.github.io/posts/Flutter-Android-Webview/';
                 
                    this.page.identifier = 'posts/Flutter-Android-Webview/';
                 
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'xiangblog';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('OZCZML8HB1', '27f82ba4185a62a85ef4ba8823f0b25b');
        var algoliaIndex = algoliaClient.initIndex('XiangBlog');
    </script>


    </body>
</html>
